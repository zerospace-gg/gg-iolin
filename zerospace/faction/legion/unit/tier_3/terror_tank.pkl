amends ".../engine/unit.pkl"
import ".../engine/turret.pkl" as Turret
import ".../engine/types.pkl" as $t
import "terror_tank.pkl" as me

name = "Terror Tank"

tags { "massive" }

hexite_cost = 200 
flux_cost = 200
supply = 20
hp = 1500
speed = 450
armor_type = "heavy"
stun_resist = 75
build_time = 60

constructing_version {
  name = "Terror Tank (Constructing)"
  build_time = 60
  hp = 1500
}

attacks {
  ["Main Gun"] {
    damage = 38
    cooldown = 0.9
    range = 1300
  }
}

local main_weapon: String = "\(me.name)'s \(me.attacks["Main Gun"].name)"

has_turret_type = "turret"
max_turrets = 4
turrets {
  default {
    flux_cost = 125
    build_time = 25
    hp = 225
    armor_type = "heavy"
  }
  ["Flame Turret"] {
    description = "Each \(name) adds splash damage to \(main_weapon)"
    attacks { 
      ["Turret Attack"] {
        damage = 25
        cooldown = 2
        bonus_percent = 100
        bonus_vs_tags { "armor:light" }
        range = 1100
      }
    }
  }
  ["Gatling Gun"] {
    description = "Each \(name) adds +30% attack speed and +250 range to \(main_weapon)"
    attacks { 
      ["Turret Attack"] {
        damage = 11
        cooldown = 0.5
        range = 1500
      }
    }
  }
  ["Pulseforge Accelerator"] {
    description = "Each \(name) adds +30% attack speed and +250 range to \(main_weapon)"
  }
  ["Shield Generator"] {
    description = "Each \(name) adds 4 shields charges to the \(me.name). +75 shields for 8 seconds to nearby unit."
  }
}
