module infuse
import "types.pkl" as $t

class StatMultiplier { fixed type: "mult"; num: Number }
class StatReplacer { fixed type: "replace"; num: Number }
class StatAdder { fixed type: "add"; num: Number }

typealias Stat = StatMultiplier | StatReplacer | StatAdder

class Rule {
  supply: Stat?
  hp: Stat?
  damage: Stat?
  reload_time: Stat?
  cooldown: Stat?
  tags: Listing<String>?
  domain: $t.DomainType
}

fixed default_rule = new Rule {
  supply = new StatMultiplier { num = 2.0 }
  hp = new StatMultiplier { num = 2.0 }
  cooldown = new StatMultiplier  { num = 0.5 }
}

fixed damage_rule = new Rule {
  supply = new StatMultiplier  { num = 2.0 }
  hp = new StatMultiplier { num = 2.0 }
  damage = new StatMultiplier { num = 2.0 }
}
