abstract module gamepieceChild
extends "gamepiece.pkl"
import "parent_info.pkl" as ParentInfo
import "types.pkl" as $t

hidden parent: ParentInfo 
hidden fixed subSlug: String = $t.makeSlug(name)

fixed src: String = parent.src
fixed slug: $t.Slug = 
  if (subtype == subSlug) 
    "\(parent.slug)-\(subSlug)" 
  else 
  "\(parent.slug)-\(subtype)-\(subSlug)"

fixed id: $t.Id = "\(parent.id)/\(subtype)/\(slug)"
fixed belongsTo: String = parent.slug

fixed faction: String? = parent.fromPath.faction
fixed factionType: String? = parent.fromPath.factionType

hidden fixed extendTags: Listing<String> = (super.extendTags) { "belongsTo:\(parent.slug)" }
