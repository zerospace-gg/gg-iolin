abstract module gamepiece_child
extends "gamepiece.pkl"
import "parent_info.pkl" as ParentInfo
import "types.pkl" as $t

hidden parent: ParentInfo 
hidden fixed sub_slug: String = $t.makeSlug(name)

fixed src: String = parent.src
fixed slug: $t.Slug = 
  if (subtype == sub_slug) 
    "\(parent.slug)-\(sub_slug)" 
  else 
  "\(parent.slug)-\(subtype)-\(sub_slug)"

fixed id: $t.Id = "\(parent.id)/\(subtype)/\(slug)"
fixed belongs_to: String = parent.slug

fixed faction: String? = parent.fromPath.faction
fixed factionType: String? = parent.fromPath.factionType

hidden fixed extend_tags: Listing<String> = (super.extend_tags) { "belongs_to:\(parent.slug)" }
