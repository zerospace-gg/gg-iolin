abstract module faction
extends "../data.pkl"
import "../upgrade/talent.pkl" as Talent
import "../ability/topbar.pkl" as TopBarPower
import "../building/building.pkl" as Building
import "../unit/unit.pkl" as Unit
import "../unit/hero.pkl" as Hero

fixed type = "faction"
fixed subtype = faction_type

/// the three core types of faction
hidden fixed faction_type: FactionType
typealias FactionType = "main" | "merc" | "ai"

/// whether or not this type should be playable
fixed playable = faction_type != "ai"

local faction_slug = this.slug
/// talents. 10 for main faction, 5 for mercs.
talents: Listing<Talent> = new Listing<Talent> {
  default { faction = faction_slug }
}

/// topbar abilities. should be 4.
topbar: Listing<TopBarPower> = new Listing<TopBarPower> {
  default { faction = faction_slug }
}

/// all of the buildings that can be built by this faction, including its base and extractor
buildings: Listing<Building> = new Listing<Building> {
  default { faction = faction_slug }
}

/// all of the units that can be built or cast by this faction, including its worker and harvester
units: Listing<Unit> = new Listing<Unit> {
  default { faction = faction_slug }
}

/// which heroes the player can choose if they select this faction
heroes: Listing<Hero>

/// cross-faction heroes available to this faction
cross_faction_heroes: Listing<String> 
