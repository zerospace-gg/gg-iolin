amends ".../engine/faction/main.pkl"

name = "Protectorate"

local faction_id = this.slug
local fac_defaults = new Mixin {
  faction = faction_id
}

talents {
  default {
    faction = faction_id
  }

  new {
    name = "Improved Beam up"
    description = "-50% Beam up delay, +100% healed amount"
    column = 1 
    level = 1
  }

  new {
    name = "Infantry Walker Damage"
    description = "+10% Weapon damage for infantry and walkers. Affects Commandos, Bastions, Atlas, Striders, and Various mercenary units"
    column = 1 
    level = 2
  }

  new {
    name = "Elite Infantry"
    description = "Infantry units gain +20% movement speed and +10% weapon range. Affects Commando, Bastion, and mercenary infantry units."
    column = 1 
    level = 3
  }

  new {
    name = "Mercenary Reinforcement"
    description = "Reinforcements are accompanied by a random basic mercenary unit"
    column = 1 
    level = 4
  }

  new {
    local tbp = topbar[2]
    slug = tbp.slug.replaceLast("-topbar", "-talent")
    name = tbp.name.replaceLast(" (Topbar)", "(Talent)")
    description = "Unlocks The \(tbp.name) topbar power: \(tbp.description)"
    column = 1 
    level = 5
    unlocks { tbp.slug }
  }

  new {
    name = "Vehicle Engines"
    description = "+15% movement speed for vehicles. Affects Avengers, Strikers, Disruptors, Juggernauts, and various mercenary units."
    column = 2 
    level = 1
  }

  new {
    name = "Vehicle Durability"
    description = "+15% health and shields for vehicles. Affects Avengers, Strikers, Disruptors, Juggernauts, and various mercenary units."
    column = 2 
    level = 2
  }

  new {
    name = "Veteran Reinforcement"
    description = "Reinforcing units start at rank 1 veterancy"
    column = 2 
    level = 3
  }

  new {
    name = "Improved Crisis Response"
    description = "+25% power gained from lost units and structures"
    column = 2 
    level = 4
  }

  new {
    local tbp = topbar[3]
    slug = tbp.slug.replaceLast("-topbar", "-talent")
    name = tbp.name.replaceLast(" (Topbar)", "(Talent)")
    description = "Unlocks The \(tbp.name) topbar power: \(tbp.description)"
    column = 2 
    level = 5
    unlocks { tbp.slug }
  }
}

topbar {
  default { faction = faction_id }

  new {
    name = "Beam Up"
    topbar_type = "recall"
    description = "teleports a unit to the nearest operating tower. drag to select multiple units. units are healed for 100 HP. Costs 0.3 power per supply of units teleported"
    slot = 1
  }

  new {
    name = "Reinforcements"
    topbar_type = "special"
    cost = 25
    slot = 2
  }

  new {
    name = "Airstrike (Topbar)"
    topbar_type = "ultimate"
    description = "Send a plane to bomb the area for 200 damage (100 vs buildings). Requires airstrips to be built. The airstrip limits increases with level."
    cost = 3
    slot = 3
    unlocked_by { "airstrike-talent" }
  }

  new {
    name = "Weapon X (Topbar)"
    topbar_type = "ultimate"
    description = "Call down a mech. Loses health over time and when destroyed sets up nuclear explosion."
    cost = 50
    slot = 4
    cooldown = 120
    unlocked_by { "weapon-x-talent" }
  }
}


buildings {
  // import("buildings/x.pkl") |> fac_defaults
}

units {
  // import("units/x.pkl") |> fac_defaults
}

heroes {
  // import("heroes/x.pkl") |> fac_defaults
}

cross_faction_heroes { }
