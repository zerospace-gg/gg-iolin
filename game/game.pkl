module game
import ".../engine/data.pkl" as Data
import ".../engine/map.pkl" as ZSMap
import ".../engine/faction/faction.pkl" as Faction
import ".../engine/faction/main.pkl" as MainFaction
import ".../engine/faction/merc.pkl" as MercFaction
// import ".../factions/non_player.pkl" as NonPlayerFaction

zerospaceBuildId: "v1223334444"
local all_maps: Listing<ZSMap> = import("maps/maps.pkl").maps
local all_main_factions: Listing<MainFaction> = import("factions/factions.pkl").factions
local all_mercenaries: Listing<MercFaction> = import("mercs/mercs.pkl").mercs
// nonplayer: Listing<NonPlayerFaction> = import("non_players/non_players.pkl").non_players

local children: List<Data> = List(all_maps, all_main_factions, all_mercenaries).flatMap((x) -> x.toList())
local grandchildren: List<Data> = children.flatMap((x) -> x.children)
local all_children: List<Data> = children + grandchildren

all: Mapping<String, Data> = children.toMap((x) -> x.slug, (x) -> x).toMapping() 
idToSlug: Mapping<String, String> = children.toMap((x) -> x.id, (x) -> x.slug).toMapping()
